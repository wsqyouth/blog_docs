#### 一、背景

之前折腾过个人服务器,过一段时间挂掉了，今天登录腾讯云服务器发现域名备案还生效，就重新部署下，记录之。

#### 二、网站架构
使用golang实现的一个博客系统,基于markdown文件生成博客，免去了搭建数据库、搭建第三方博客系统、黑客入侵的烦恼。
`https://github.com/wsqyouth/goblog` 

主要采用域名解析+nginx转发,请求后端服务的思路进行实现。


#### 三、部署
1. 部署应用服务,这里已经配置了我的服务器防火墙访问80端口
```
/home/coopers/workspace/goblog/cmd
nohup ./goblog > wsq.log &
```
之后本机8181服务端口已启动,通过ps或者netstat进行进程、端口检测

2. 部署nginx
root模式下
```
cd /usr/local/nginx/sbin ./nginx
./nginx -s stop
./nginx -s reload 
```
修改conf文件:
```
/usr/local/nginx/conf/nginx.conf

location / {
    #proxy_pass http://www.baidu.com;
    #proxy_pass http://www.wsqyouth.cn:8181;
    proxy_pass http://127.0.0.1:8181;
        root   html;
        index  index.html index.htm;
    }
```
此时检查nginx服务是否启动,通过lsof -i:80检查即可。

3. 域名解析及外部检查

防火墙配置:
https://console.cloud.tencent.com/lighthouse/instance/detail?searchParams=rid%3D1&rid=1&id=lhins-rc1v9izt&tab=firewall
``````
ping www.wsqyouth.cn 检查防火墙是否配置正常
www.wsqyouth.cn
